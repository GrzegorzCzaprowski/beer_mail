{"ast":null,"code":"import React from 'react';\nimport classnames from 'classnames';\nimport Modal from './Modal';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSyncAlt } from '@fortawesome/free-solid-svg-icons';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport { faSearch } from '@fortawesome/free-solid-svg-icons';\n\nclass Allusers extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.loadUsers = () => {\n      fetch('http://localhost:8000/user/get', {\n        method: \"GET\",\n        headers: new Headers({\n          'Authorization': \"Bearer \" + localStorage.getItem('token')\n        })\n      }).then(response => {\n        response.json().then(json => {\n          if (response.status === 401) {\n            localStorage.clear();\n            window.location.href = '/login';\n          }\n\n          if (json.status === \"succes\") {\n            const copyData = json.data.slice();\n            this.setState({\n              data: json.data,\n              copyData: copyData\n            });\n          } else {\n            console.log(json.data);\n          }\n        });\n      }).catch(function (error) {\n        console.log('Request failed', error);\n      });\n    };\n\n    this.filterData = () => {\n      console.log('sss');\n      console.log(this.state.nameFilter);\n    };\n\n    this.state = {\n      data: [],\n      copyData: [],\n      deletedUser: {},\n      userToDelete: undefined,\n      showInfo: false,\n      showErr: false,\n      err: \"\",\n      nameFilter: ''\n    };\n    this.deleteUser = this.deleteUser.bind(this);\n  }\n\n  componentDidMount() {\n    this.loadUsers();\n  }\n\n  deleteUser(id) {\n    fetch('http://localhost:8000/user/delete/' + id, {\n      method: \"DELETE\",\n      headers: new Headers({\n        'Authorization': \"Bearer \" + localStorage.getItem('token')\n      })\n    }).then(response => {\n      response.json().then(json => {\n        if (response.status === 401) {\n          localStorage.clear();\n          window.location.href = '/login';\n        }\n\n        if (json.status === \"succes\") {\n          this.setState({\n            deletedUser: json.data,\n            showInfo: true,\n            showErr: false\n          });\n          this.loadUsers();\n        } else {\n          this.setState({\n            showInfo: false,\n            showErr: true,\n            err: json.data\n          });\n        }\n      });\n    });\n  }\n\n  render() {\n    return null;\n  }\n\n}\n\nexport default Allusers;","map":{"version":3,"sources":["/home/lucjan/go/src/github.com/GrzegorzCzaprowski/beer_mail/frontend/src/sites/components/Allusers.js"],"names":["React","classnames","Modal","FontAwesomeIcon","faSyncAlt","faPlus","faSearch","Allusers","Component","constructor","props","loadUsers","fetch","method","headers","Headers","localStorage","getItem","then","response","json","status","clear","window","location","href","copyData","data","slice","setState","console","log","catch","error","filterData","state","nameFilter","deletedUser","userToDelete","undefined","showInfo","showErr","err","deleteUser","bind","componentDidMount","id","render"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,SAAT,QAA0B,mCAA1B;AACA,SAASC,MAAT,QAAuB,mCAAvB;AACA,SAASC,QAAT,QAAyB,mCAAzB;;AAEA,MAAMC,QAAN,SAAuBP,KAAK,CAACQ,SAA7B,CAAuC;AAEnCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAmBnBC,SAnBmB,GAmBP,MAAK;AACbC,MAAAA,KAAK,CAAC,gCAAD,EAAmC;AACpCC,QAAAA,MAAM,EAAE,KAD4B;AAEpCC,QAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AACjB,2BAAkB,YAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADb,SAAZ;AAF2B,OAAnC,CAAL,CAMCC,IAND,CAMMC,QAAQ,IAAI;AACdA,QAAAA,QAAQ,CAACC,IAAT,GAAgBF,IAAhB,CAAqBE,IAAI,IAAI;AACzB,cAAGD,QAAQ,CAACE,MAAT,KAAoB,GAAvB,EAA4B;AACxBL,YAAAA,YAAY,CAACM,KAAb;AACAC,YAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,QAAvB;AACH;;AACD,cAAGL,IAAI,CAACC,MAAL,KAAgB,QAAnB,EAA4B;AACxB,kBAAMK,QAAQ,GAAGN,IAAI,CAACO,IAAL,CAAUC,KAAV,EAAjB;AACA,iBAAKC,QAAL,CAAc;AACVF,cAAAA,IAAI,EAAEP,IAAI,CAACO,IADD;AAEVD,cAAAA,QAAQ,EAAEA;AAFA,aAAd;AAIH,WAND,MAMO;AACHI,YAAAA,OAAO,CAACC,GAAR,CAAYX,IAAI,CAACO,IAAjB;AACH;AACJ,SAdD;AAeH,OAtBD,EAuBCK,KAvBD,CAuBO,UAASC,KAAT,EAAgB;AACnBH,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BE,KAA9B;AACH,OAzBD;AA0BH,KA9CkB;;AAAA,SA+EnBC,UA/EmB,GA+EN,MAAM;AACfJ,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKI,KAAL,CAAWC,UAAvB;AACH,KAlFkB;;AAEf,SAAKD,KAAL,GAAa;AACTR,MAAAA,IAAI,EAAG,EADE;AAETD,MAAAA,QAAQ,EAAE,EAFD;AAGTW,MAAAA,WAAW,EAAC,EAHH;AAITC,MAAAA,YAAY,EAAEC,SAJL;AAKTC,MAAAA,QAAQ,EAAE,KALD;AAMTC,MAAAA,OAAO,EAAE,KANA;AAOTC,MAAAA,GAAG,EAAE,EAPI;AAQTN,MAAAA,UAAU,EAAE;AARH,KAAb;AAWA,SAAKO,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACH;;AACDC,EAAAA,iBAAiB,GAAG;AAChB,SAAKlC,SAAL;AACH;;AA+BDgC,EAAAA,UAAU,CAACG,EAAD,EAAK;AACXlC,IAAAA,KAAK,CAAC,uCAAuCkC,EAAxC,EAA4C;AAC7CjC,MAAAA,MAAM,EAAE,QADqC;AAE7CC,MAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AACjB,yBAAkB,YAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADb,OAAZ;AAFoC,KAA5C,CAAL,CAMCC,IAND,CAMMC,QAAQ,IAAI;AACdA,MAAAA,QAAQ,CAACC,IAAT,GAAgBF,IAAhB,CAAqBE,IAAI,IAAI;AACzB,YAAGD,QAAQ,CAACE,MAAT,KAAoB,GAAvB,EAA4B;AACxBL,UAAAA,YAAY,CAACM,KAAb;AACAC,UAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,QAAvB;AACH;;AACD,YAAGL,IAAI,CAACC,MAAL,KAAgB,QAAnB,EAA4B;AACxB,eAAKQ,QAAL,CAAc;AACVQ,YAAAA,WAAW,EAAEjB,IAAI,CAACO,IADR;AAEVa,YAAAA,QAAQ,EAAE,IAFA;AAGVC,YAAAA,OAAO,EAAC;AAHE,WAAd;AAKA,eAAK9B,SAAL;AACH,SAPD,MAOO;AACH,eAAKkB,QAAL,CAAc;AACVW,YAAAA,QAAQ,EAAE,KADA;AAEVC,YAAAA,OAAO,EAAC,IAFE;AAGVC,YAAAA,GAAG,EAAEtB,IAAI,CAACO;AAHA,WAAd;AAKH;AACJ,OAnBD;AAoBH,KA3BD;AA4BH;;AAODoB,EAAAA,MAAM,GAAG;AACL,WACG,IADH;AAGN;;AA1FqC;;AA+FvC,eAAexC,QAAf","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport Modal from './Modal';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faSyncAlt } from '@fortawesome/free-solid-svg-icons'\nimport { faPlus } from '@fortawesome/free-solid-svg-icons'\nimport { faSearch } from '@fortawesome/free-solid-svg-icons'\n\nclass Allusers extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            data : [],\n            copyData: [],\n            deletedUser:{},\n            userToDelete: undefined,\n            showInfo: false,\n            showErr: false,\n            err: \"\",\n            nameFilter: ''\n        };\n\n        this.deleteUser = this.deleteUser.bind(this)\n    }\n    componentDidMount() {\n        this.loadUsers()\n    }\n\n    loadUsers = () =>{\n        fetch('http://localhost:8000/user/get', {\n            method: \"GET\",\n            headers: new Headers({\n                'Authorization' : \"Bearer \" + localStorage.getItem('token')\n            })\n        })\n        .then(response => {\n            response.json().then(json => {\n                if(response.status === 401) {\n                    localStorage.clear();\n                    window.location.href = '/login';\n                }\n                if(json.status === \"succes\"){\n                    const copyData = json.data.slice();\n                    this.setState({\n                        data: json.data,\n                        copyData: copyData\n                    })\n                } else {\n                    console.log(json.data)\n                }\n            })\n        })\n        .catch(function(error) {\n            console.log('Request failed', error)\n        });\n    }\n\n    deleteUser(id) {\n        fetch('http://localhost:8000/user/delete/' + id, {\n            method: \"DELETE\",\n            headers: new Headers({\n                'Authorization' : \"Bearer \" + localStorage.getItem('token')\n            })\n        })\n        .then(response => {\n            response.json().then(json => {\n                if(response.status === 401) {\n                    localStorage.clear();\n                    window.location.href = '/login';\n                }\n                if(json.status === \"succes\"){\n                    this.setState({\n                        deletedUser: json.data,\n                        showInfo: true,\n                        showErr:false\n                    })\n                    this.loadUsers()\n                } else {\n                    this.setState({\n                        showInfo: false,\n                        showErr:true,\n                        err: json.data\n                    })\n                }\n            })\n        })\n    }\n\n    filterData = () => {\n        console.log('sss')\n        console.log(this.state.nameFilter);\n    }\n\n    render() {\n        return (\n           null\n    );\n }\n\n}\n\n\nexport default Allusers;\n"]},"metadata":{},"sourceType":"module"}